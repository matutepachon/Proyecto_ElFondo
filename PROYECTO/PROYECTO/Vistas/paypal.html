<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <link rel="stylesheet" href="../Accesorios/EstiloProyecto.css">
    <script src="https://www.paypal.com/sdk/js?client-id=AYs4iMtmN7UVoKcy7kG4hnJKj7133Z0x6i2V52ClHeY5fP_jv9bWhGLunTBnNccHKnS89DgfSvWQuiV-"></script>
    
    <title>BitnessGym</title>
</head>

<body>
    <main class="container-fluid">
        <div id="Arriba" class="fixed-top row align-items-center">
            <article id="Logo" class="col-3 col-md-1 d-flex align-items-center">
                <a href="index.html">
                    <h1 style="color: white;" class="align-items-center d-flex">
                        <img class="me-2 mb-2 mt-1" width="80px" src="../Accesorios/LogoBitnessGym.png" alt="Logo BitnessGym">
                        <span class="d-sm-inline d-none">BitnessGym</span>
                    </h1>
                </a>
            </article>

            <article class="d-none d-md-block col-md-3"></article>

            <article class="col-9 col-md-8 d-flex justify-content-end align-items-center flex-wrap">
                <a href="Sucursales.html">
                    <button id="Sucu" class="btn">Sucursal</button>
                </a>
                <a href="Productos.html" class="ms-2 mt-md-0">
                    <button id="btnProd" class="btn">Productos</button>
                </a>
                <a id="InicioSes" class="btn btn-primary me-2 ms-2 mt-3" href="Login.html">Iniciar Sesión</a>

                <div class="dropdown" id="dropdown">
                    <button class="btn dropdown-toggle ms-2 me-2" type="button" id="nomUsu" data-bs-toggle="dropdown" aria-expanded="false"></button>
                    <ul class="dropdown-menu menuDsp" aria-labelledby="dropdownMenuButton">
                        <li><a class="dropdown-item btn" href="admin.html" id="rootmenu">Menu root</a></li>
                        <li><a class="dropdown-item btn" id="btnCerrSes">Cerrar sesión</a></li>
                    </ul>
                </div>
            </article>
        </div>
        <div class="container mt-4">
    <header>
        <h1>Seleccione metodo de pago</h1>
        
    </header>


        <!-- Aquí puedes añadir una lista de productos -->
        <div id="paypal-button-container"></div> <!-- Contenedor para el botón de PayPal -->
   

    
        <script src="paypal.js" defer></script> 
    <script>


     paypal.Buttons({
    createOrder: function(data, actions) {
        // Obtener el total dinámico del carrito
        const total = carrito.calcularTotal(); // Asegúrate de que esta función retorne el total en formato string
        return actions.order.create({
            purchase_units: [{
                amount: {
                    value: total.toFixed(2) // Usar el total calculado del carrito
                }
            }]
        });
    },
    onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
            // Aquí puedes enviar los detalles de la transacción a tu servidor
            fetch('paypal.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    orderID: data.orderID,
                    payerID: data.payerID,
                    details: details
                })
            })
            .then(response => response.json())
            .then(data => {
                alert('Transacción completada por ' + details.payer.name.given_name);
                console.log(data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        });
    },
    onCancel: function(data) {
        alert('La transacción fue cancelada');
    },
    onError: function(err) {
        console.error('Ocurrió un error durante la transacción:', err);
        alert('Hubo un error al procesar su transacción. Inténtelo de nuevo.');
    }
}).render('#paypal-button-container'); // Renderiza el botón en el contenedor especificado


    </script>
   <script src="../Contolador/carritos.js"></script>
</body>
</html>
